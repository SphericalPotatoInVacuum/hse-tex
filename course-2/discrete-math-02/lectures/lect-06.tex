\ProvidesFile{lect-06.tex}[Лекция 6]

\section{Лекция 6}

\subsection{Формулы и термы языка первого порядка}

Сегодня мы начинаем изучение логики.
Давайте немножко поговорим о том, что это такое.
Вообще, логика --- это такая наука, которая посвящена анализу различных рассуждений, как формальных математических, так и, может быть, не совсем формальных философских, юридических или каких-нибудь иных.
То, что называется {\it математической логикой}, в основном, посвящено изучению различных доказательств, разных рассуждений, которые встречаются в математике, математическими же методами.
Например, обычная логика стремится отделить корректные рассуждения, в которых из истинных посылок всегда выводят истинные следствия, от некорректных.
И математическая логика тоже не чужда этой задаче.
При этом, нам с вами нужно будет точно определить, что же значит истинность утверждения, что такое утверждение или высказывание.
Мы не будем пытаться решить эту задачу в ее общефилософской широте.
Мы попробуем смоделировать те высказывания, с которыми работает сама математика (т. е. те, которые встречаются в разных ее областях).
Начнем с изучения какого-то конкретного примера.

\paragraph{Пример} Рассмотрим арифметику натуральных или целых чисел.
Давайте посмотрим, что же у нас в арифметике есть.
В арифметике бывают:
\begin{description}
    \item[Высказывания] например, \enquote{$2 = 3$} или \enquote{$2 < 3$}.
    Хочется верить, что первое высказывание ложно, а второе истинно.
    Так оно, в общем-то, и есть, если у нас фиксирован смысл чисел $2$, $3$, операций \enquote{$=$} и \enquote{$<$}.
    \item[Не высказывания] например, \enquote{$2x = 3 + y$} не является высказыванием, но почему?
    Потому что в нем присутствуют переменные.
    То есть мы не можем ничего утверждать про его истинность или ложность, не определив значения {\it переменных} $x$ и $y$.
\end{description}
Тем не менее, у этих объектов есть нечто общее.
В конечном счете, может быть, по модулю придания переменным каких-то значений, они обозначают какое-то утверждение (или высказывание), возможно, с параметрами.
Высказывания с параметрами также называются {\it предикатами}.
Сами такие выражения ($2 = 3$ или $2x = 3 + y$) мы будем называть {\it формулами}.
Формула обозначает предикат.
Бывают еще формулы вида
\begin{equation} \label{eq::06::01}
    \exists x \colon \ \forall y \quad x \leqslant y.
\end{equation}
Такая формула с кванторами также обозначает некоторое высказывание.
Обратим внимание, что вот это высказывание будет верным для $\N$, но ложным для $\Z$.
Что можно делать с такими выражениями?
Их можно комбинировать (или группировать) с помощью некоторых {\it логических связок}.
В принципе, набор связок можно выбирать произвольно, но можно доказать, что всегда достаточно конъюнкции и отрицания (или дизъюнкции и отрицания).
Мы будем пользоваться связками $\land, \lor, \implies, \neg$.
Что же такое связки?
С чисто синтаксической точки зрения, связки --- это такие значки, которые позволяют из одной формулы делают другую, например если у нас была формула
\begin{equation} \label{eq::06::02}
    \exists x \colon \ x + 2 = 1,
\end{equation}
вы можете взять и написать, например, такое утверждение:
\begin{equation}
    ((\exists x \colon x + 2 = 1) \lor \neg (2x = 3 + y)) \implies 3 = 5 + z.
\end{equation}

\paragraph{Из чего образуются формулы?} Давайте посмотрим на выражения вида
$$
    2 + x, \quad 3 \cdot y, \quad z, \quad (z + x) \cdot x + 8, \quad \ldots
$$
Они обозначают числа, зависящие от параметров.
А что такое числа?
Числа --- это элементы нашей предметной области, о которой мы говорим, то есть может быть натуральные числа, может быть целые числа, как мы договоримся.
То есть, формулы обозначают элементы предметной области, о которой наша математическая теория ведет разговор.
Такие выражения называются {\it термами}\footnote{терм --- от слова термин.}.
Содержательно, терм --- это имя числа или какого-то другого объекта, который мы рассматриваем.
Но у некоторых объектов могут быть имена собственные, например
\begin{itemize}
    \item $2$, $3$ --- константы;
    \item $x$, $y$ --- переменные.
\end{itemize}
Еще мы можем строить термы следующим образом: можно взять два каких-то терма, и соединить их символом какой-то операции или функции:
$$
    2 + x
$$
Здесь \enquote{$+$} --- символ бинарной операции (функции).
То есть термы можно также называть {\it функциональными выражениями}.
Они обозначают результат применения каких-то функций к каким-то константам или переменным.
Обратите внимание, термы и формулы являются некими разными сущностями.
В чем же между ними разница?
Терм обозначает число, а формула обозначает высказывание, при этом и число, и высказывание могут зависеть от параметров.
При этом, к формуле мы можем задать вопрос\footnote{при определенном выборе значений параметров.} \enquote{верно это или нет?}, а к терму мы можем задать вопрос \enquote{чему это равно?}.
То есть формула --- это какое-то утверждение, а терм --- имя объекта.

Как же обстоит дело в общем случае?
Давайте попробуем это понять.
В арифметике нам, до сих пор, встретились некоторые константы (2, 3, 8), были символы переменных ($x$, $y$, $z$), были символы служебные (круглые скобки) и были символы \enquote{$+$} и \enquote{$\cdot$}.
Давайте попробуем к этому всему подойти абстрактно.
Как вообще можно было бы абстрактно определить терм?
Определение это зависит от списка символов, над которыми эти термы определяются.
Ну и аналогично, для определения формул, нам требовались служебные символы, логические символы (связки, кванторы) и символы, специфические для нашей области (например, символы \enquote{$=$} и \enquote{$<$}).

\subsection{Сигнатуры}

Если все эти символы собрать в одну кучу, получится то, что называется {\it сигнатурой} --- список символов, которые используются для построения формул в той или иной математической теории.
Конечно же, сигнатуру можно определить и формально.
Посмотрим, для начала, какая же у нас сигнатура в арифметике:
\begin{itemize}
    \item Символы отношений\footnote{$(i)$ в правом верхнем углу символа отношения или операции обозначает его арность, то есть $(2)$ означает, что отношение бинарное.} (предикатов): $=^{(2)}$, $<^{(2)}$, $\leqslant^{(2)}$, $>^{(2)}$, $\geqslant^{(2)}$, $\ldots$
    \item Символы операций (функций): $+^{(2)}$, $\cdot^{(2)}$, $(\cdot)\inc^{(1)}$, $\ldots$
    \item Символы констант: $2$, $3$, $\ldots$
\end{itemize}
Теперь попробуем определить сигнатуру абстрактно.
\begin{definition}
    Сигнатурой $\sigma$ называется тройка множеств
    $$
        \sigma = \left(\Rel, \Func, \Const\right),
    $$
    где
    \begin{itemize}
        \item $\Rel \neq \emptyset$ --- множество символов отношений (или предикатных символов).
        \item $\Func$ --- множество функциональных символов.
        \item $\Const$ --- множество символов констант.
    \end{itemize}
\end{definition}
Обратите внимание на следующий интелектуальный трюк: в принципе, мы можем считать саму операцию \enquote{$+$} символом для себя, но нам это не выгодно.
Почему?
Потому что точно также можно считать операцию \enquote{$\leqslant$} символом для себя, однако проще про них думать как про отдельную сущность.
Есть один символ, есть формула \eqref{eq::06::01}, но эта формула, в зависимости от интерпертации $x$ и $y$ как натуральных чисел или как целых, ведет себя по-разному.
То есть нам выгодно разделить имя отношения и само отношение.
Имя может быть одно, формула одна, а поведение этой формулы, при разной интерпретации, может быть разным.
Так, например, уравнение \eqref{eq::06::02} одно, а наличие у него решения зависит от того, к какой области мы его применяем, и, по-сути дела, как мы понимаем \enquote{$+$}: то ли как функцию сложения целых чисел, то ли как функцию сложения натуральных.
Поэтому мы отделяем само отношение от его обозначения.

На самом деле, $\Rel, \Func$ и $\Const$ --- это не просто какие-то множества, а еще объектам из этих множеств приписано некоторое натуральное число, называемое {\it валентностью} или {\it арностью}.
То есть, например, для любого $R \in \Rel$ приписано $n \in \N$ такое, что $R^{(n)} \in \Rel$.
Аналогично, валентности приписаны и функциональным символам, то есть $f^{(m)} \in \Func$.
Давайте теперь попытаемся понять, как же у нас определяются формулы.
Как уже было сказано, формулы строятся из термов, поэтому сначала нужно определить понятие терма.
Для начала зафиксируем, что считается общим для всех сигнатур:
\begin{itemize}
    \item алфавит переменных $\Var = \left\{v_{0}, v_{1}, v_{2}, \ldots\right\} \sim \N$.
    По умолчанию, разные буквы $x$, $y$, $z$, $\dots$, обозначают какие-то разные $v_{i}$.
    \item символы связи $\land, \lor, \implies, \neg, \iff$.
    \item кванторы $\exists$ и $\forall$.
    \item скобки \enquote{(} и \enquote{)}. 
\end{itemize}
Из всего этого зоопарка мы будем конструировать формулы и сигнатуры.

\begin{definition}[терма в арифметике] \label{def::06::inductive-term-in-arithmetics}
    Будем определять термы индуктивно:
    \begin{enumerate}
        \item $x \in \Var \implies x$ --- это терм.
        Будем обозначать этот факт как $x \in \Term$, где $\Term$ является множеством термов.
        \item $c \in \Const \implies c \in \Term$.
        \item $t, s \in \Term \implies (t + s) \in \Term$, $(t \cdot s) \in \Term$, $t\inc \in \Term$.
    \end{enumerate}
\end{definition}

В соответствии с этими правилами мы можем доказать, что выражение
$$
    (2 + x)\inc
$$
является термом, потому что термом является $2 + x$, которое является термом, потому что $2$ и $x$ являются термами.
Будем считать, что множество термов является наименьшим по включению среди всех множеств, удовлетворяющих индуктивному определению \ref{def::06::inductive-term-in-arithmetics}.

\begin{definition}
    Будем обозначать через $\Term_{\sigma}$ множество термов в сигнатуре $\sigma$.
\end{definition}

\begin{definition}[терма в произвольной сигнатуре]
    Зафиксируем сигнатуру $\sigma$ и определим $\Term_{\sigma}$ индуктивно:
    \begin{enumerate}
        \item $x \in \Var \implies x \in \Term_{\sigma}$.
        \item $c \in \Const_{\sigma} \implies c \in \Term_{\sigma}$.
        \item $f^{(m)} \in \Func_{\sigma}$, $t_{1}, \ldots, t_{m} \in \Term_{\sigma} \implies f t_{1} \ldots t_{m} \in \Term_{\sigma}$.
    \end{enumerate}
\end{definition}
Обратим внимание, что последний пункт определения записан в польской нотации, то есть, например, $2 + x \mapsto +2x$, а $(2 + x) \cdot (y + x) \mapsto \cdot +2x +yx$.

\begin{definition}[формулы в арифметике]
    Определим $\Fm$ индуктивно:
    \begin{enumerate}
        \item $t, s \in \Term \implies$ $t = s$, $t < s$, $t \leqslant s$, $t > s$, $t \geqslant s \in \Fm$\footnote{формулы такого вида называются {\it атомарными}.}.
        \item $\phi, \psi \in \Fm \implies (\phi \land \psi), (\phi \lor \psi), (\phi \implies \psi), (\phi \iff \psi), \neg \phi \in \Fm$.
        \item $x \in \Var, \phi \in \Fm \implies \forall x~\phi, \exists x~\phi \in \Fm$.
    \end{enumerate}
\end{definition}

\paragraph{Пример} $(2 + x)\inc$ --- это терм.
$y + 3 \cdot z$ --- это тоже терм.
Тогда из них мы можем организовать какую-то формулу, соединив их чем-нибудь, например, символом \enquote{$<$}:
$$
    (2 + x)\inc < y + 3 \cdot z.
$$
Как видим, получилась формула.
Можно на нее навесить знак отрицания,
$$
    \neg ((2 + x)\inc < y + 3 \cdot z),
$$
получится тоже формула.
Можно еще и квантор накинуть:
$$
    \forall w \quad \neg ((2 + x)\inc < y + 3 \cdot z).
$$
Ну и так далее.

\begin{definition}[формулы в произвольной сигнатуре]
    Зафиксируем сигнатуру $\sigma$ и определим $\Fm_{\sigma}$ индуктивно:
    \begin{enumerate}
        \item $R^{(n)} \in \Rel_{\sigma}$, \ $t_{1}, \ldots, t_{n} \in \Term_{\sigma} \implies R t_{1} \ldots t_{n} \in \Fm_{\sigma}$.
        \item $\phi, \psi \in \Fm_{\sigma} \implies (\phi \land \psi), (\phi \lor \psi), (\phi \implies \psi), (\phi \iff \psi), \neg \phi \in \Fm_{\sigma}$.
        \item $x \in \Var$, $\phi \in \Fm_{\sigma} \implies \forall x~\phi$, $\exists x~\phi \in \Fm_{\sigma}$.
    \end{enumerate}
\end{definition}

Введя понятия терма и формулы, введем некоторые синтаксические понятия, которые с ними естественным образом связаны.
Заведем множество $V(t) = $ \enquote{все переменные, которые встречаются в $t$}.
Определение, конечно, хорошее, но про него сложно что-то говорить формально.
Попробуем зайти с другой стороны.
\begin{definition}~ \label{def::variables-in-term}
    Определим множество $V$ всех переменных, которые встречаются в терме $t$ рекурсивно:
    \begin{enumerate}
        \item Если $t = x \in \Var$, то $V(t) = \left\{x\right\}$.
        \item Если $t = c \in \Const_{\sigma}$, то $V(t) = \emptyset$.
        \item Если $t = f t_{1} \ldots t_{m}$, то $V(t) = V(t_{1}) \cup \ldots \cup V(t_{m})$.
    \end{enumerate}
\end{definition}

\paragraph{Пример}
$$
    V(3 + ((x + y) \cdot 2)) = V(3) \cup V((x + y) \cdot 2) = \emptyset \cup V(2) \cup V(x + y) = \emptyset \cup V(x) \cup V(y) = \{x, y\}.
$$

\begin{definition}
    Определим функцию $V \colon \Fm_{\sigma} \to \Var$, которая каждой формуле ставит в соответствие множество ее переменных.
    Действуем рекурсивно:
    \begin{enumerate}
        \item $V(R t_{1} \ldots t_{n}) = V(t_{1}) \cup \ldots \cup V(t_{n})$.
        \item $V(\phi \lor \psi) = V(\phi \land \psi) = V(\phi \implies \psi) = \ldots = V(\phi) \cup V(\psi)$.
        \item $V(\exists x~\phi) = V(\forall x~\phi) = V(\phi) \cup \{x\}$.
    \end{enumerate}
\end{definition}

\paragraph{Пример}
$$
    V(\forall x~ \exists y~ (x = z + 3)) = \{x, y, z\}.
$$

На самом деле, для того, чтобы придать формулам какое-то значение, научиться выяснять, когда же формула истинна, а когда --- ложна, нам очень важно отделять те переменные, которые связаны кванторами от тех, которые кванторами не связаны и вместо которых можно что-то подставлять.
Давайте рассмотрим формулу
$$
    \exists x~(x + 2 = 1)
$$
с семантической точки зрения.
Можно ли сказать, что это свойство какого-то конкретного $x$?
Нет, это свойство всей нашей области (натуральных чисел, или же вещественных).
То есть, здесь, по сути дела, сказано, что у уравнения есть решение.
Это не свойство какого-то конкретного решения (например, в области натуральных чисел такого $x$ нет, но оно есть в области вещественных чисел).
Такое вхождение переменной называется {\it связанным}.
Мы сталкивались с подобными вещами, например, в анализе, где говорили что существует первообразная $\int \sin x \ \dd x$ функции $\sin$.
Имеет ли здесь $x$ какую-то индивидуальность?
Нет конечно, ведь запись $\int \sin x \ \dd x$ эквивалента $\int \sin y \ \dd y$, тогда как $\sin x \neq \sin y$ $\leftarrow$ здесь переменная $x$ является {\it свободной}.

Важно понимать, что в одну и ту же формулу $x$ может иметь как свободное вхождение, так и связанное, например
$$
    x = 3 \quad \lor \quad \exists x~x + 2 = 1.
$$
Здесь первый $x$ имеет свободное вхождение, а второй $x$ --- связанное.
Получается, что хоть обозначение и одно, вхождения разные, ведь в первом случае что-то говорится про конкретный объект $x$, конкретное число, а во втором случае что-то говорится про всю область наших чисел (что среди них имеется решение нашего уравнения).
То есть это, по сути дела, разные $x$, и их возможное совпадение может считаться случайным.

\begin{definition}[свободная переменная]
    Зафиксируем функцию $\FreeVar \colon \Fm_{\sigma} \to \Var$, которая каждой формуле ставит в соответствие множество {\it свободных} переменных в ней, следующим образом:
    \begin{enumerate}
        \item $\FreeVar(R t_{1} \ldots t_{n}) = V(t_{1}) \cup \ldots \cup V(t_{n})$.
        \item $\FreeVar(\phi \land \psi) = \FreeVar(\phi \lor \psi) = \ldots = \FreeVar(\phi) \cup \FreeVar(\psi)$.
        \item $\FreeVar(\forall x~\phi) = \FreeVar(\exists x~\phi) = \FreeVar(\phi) \setminus \{x\}$.
    \end{enumerate}
\end{definition}

\subsection{Доказательства индукцией по построению}

Допустим мы хотим доказать, что все $\phi \in \Fm_{\sigma}$ удовлетворяют свойству $P$, то есть $\forall \phi~P(\phi)$.
Для этого достаточно доказать, что
\begin{enumerate}
    \item $\forall R^{(n)} \in \Rel_{\sigma}$, $\forall t_{1}, \ldots, t_{n} \in \Term_{\sigma}$ \ $P(R t_{1} \ldots t_{n})$.
    \item $\forall \phi, \psi$ $P(\phi) \land P(\psi) \implies P(\phi \land \psi) \land P(\phi \lor \psi) \land \ldots$
    \item $\forall \phi$ $\forall x \in \Var$ $P(\phi) \implies P(\forall x~ \phi) \land P(\exists x~\phi)$.
\end{enumerate}
Докажем, в качестве упражнения, следующую лемму:
\begin{lemma}
    $\forall \phi \in \Fm_{\sigma}$ \ $\FreeVar(\phi) \subseteq V(\phi)$.
\end{lemma}
\begin{proof}
    Нам надо показать, что это утверждение верно для всех атомарных формул, а также, если это верно для простых формул, то верно и для более сложных.
    \begin{enumerate}
        \item $\FreeVar(R t_{1} \ldots t_{n}) \bydef V(t_{1}) \cup \ldots \cup V(t_{n}) \bydef V(R t_{1} \ldots t_{n})$.
        \item Допустим, что $\FreeVar(\phi) \subseteq V(\phi)$ и $\FreeVar(\psi) \subseteq V(\psi)$.
        Тогда $\FreeVar(\phi \implies \psi) = \FreeVar(\phi) \cup \FreeVar(\psi)$, в тоже время $V(\phi \implies \psi) = V(\phi) \cup V(\psi)$, но тогда, по предположению индукции, $\FreeVar(\phi \implies \psi) \subseteq V(\phi \implies \psi)$.
        Аналогично для остальных операций.
        \item Допустим, что $\FreeVar(\phi) \subseteq V(\phi)$.
        Хотим, чтобы $\FreeVar(\forall x~\phi) \subseteq V(\forall x~\phi)$.
        Тогда $\FreeVar(\forall x~\phi) = \FreeVar(\phi) \setminus \{x\} \subseteq V(\phi) \cup \{x\}$. \qedhere
    \end{enumerate}
\end{proof}

\paragraph{Что же означают формулы и термы}
Идея: если всем переменным придать значения, то значение формулы~$\in \{0, 1\}$, а значением терма будет некоторое \enquote{число}.
Откуда все эти значения берутся и что это за числа?
Нам нужно множество, из которого мы будем брать значение переменных.
Ну хорошо, предположим, что это какое-то множество $M$.
Рассмотрим формулу вида
$$
    3 + x.
$$
Тогда мы должны уметь сложить 3 и элемент из $M$, но тогда тройка должна быть элементом из $M$, а \enquote{$+$} надо понимать как функцию на множестве $M$.
Но тогда нужно и все константы понимать как элементы множества $M$, и все функциональные символы должны означать функции на $M$.
Но какие?
Ответ на эти вопросы называется {\it структура сигнатуры}, но это уже в следующих лекциях.